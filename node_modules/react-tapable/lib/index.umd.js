!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react")):"function"==typeof define&&define.amd?define(["exports","react"],t):t((n=n||self).reactTapable={},n.react)}(this,function(n,t){function r(){return(r=Object.assign?Object.assign.bind():function(n){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])}return n}).apply(this,arguments)}function o(n,t){var r,o;n.prototype=Object.create(t.prototype),n.prototype.constructor=n,r=n,o=t,(Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n})(r,o)}function e(n,t){(null==t||t>n.length)&&(t=n.length);for(var r=0,o=new Array(t);r<t;r++)o[r]=n[r];return o}function i(n,t){var r="undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(r)return(r=r.call(n)).next.bind(r);if(Array.isArray(n)||(r=function(n,t){if(n){if("string"==typeof n)return e(n,void 0);var r=Object.prototype.toString.call(n).slice(8,-1);return"Object"===r&&n.constructor&&(r=n.constructor.name),"Map"===r||"Set"===r?Array.from(n):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?e(n,void 0):void 0}}(n))||t&&n&&"number"==typeof n.length){r&&(n=r);var o=0;return function(){return o>=n.length?{done:!0}:{done:!1,value:n[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,a,c,u=function(){function n(){}var t=n.prototype;return t.content=function(n){throw new Error("CodeFactory must be abstract")},t.create=function(n){var t;if(this.init(n),this.options&&this._args){switch(this.options.type){case"sync":t=new Function(this.args({}),'"use strict";\n'+this.header()+this.content({onError:function(n){return"throw "+n+";\n"},onResult:function(n){return"return "+n+";\n"},resultReturns:!0,onDone:function(){return""},rethrowIfPossible:!0}));break;case"async":t=new Function(this.args({after:"_callback"}),'"use strict";\n'+this.header()+this.content({onError:function(n){return"_callback("+n+");\n"},onResult:function(n){return"_callback(null, "+n+");\n"},onDone:function(){return"_callback();\n"}}));break;case"promise":var r=!1,o=this.content({onError:function(n){return r=!0,"_error("+n+");\n"},onResult:function(n){return"_resolve("+n+");\n"},onDone:function(){return"_resolve();\n"}}),e="";e+='"use strict";\n',e+=this.header(),e+="return new Promise((function(_resolve, _reject) {\n",r&&(e+="var _sync = true;\n",e+="function _error(_err) {\n",e+="if(_sync)\n",e+="_resolve(Promise.resolve().then((function() { throw _err; })));\n",e+="else\n",e+="_reject(_err);\n",e+="};\n"),e+=o,r&&(e+="_sync = false;\n"),e+="}));\n",t=new Function(this.args({}),e)}return this.deinit(),t}},t.setup=function(n,t){t.taps.forEach(function(t){n.push(t.fn)})},t.init=function(n){this.options=n,this._args=n.args.slice()},t.deinit=function(){this.options=void 0,this._args=void 0},t.header=function(){var n="";return this.needContext()?n+="var _context = {};\n":n+="var _context;\n",n+"var fns = this.fns;\n"},t.needContext=function(){if(this.options)for(var n,t=i(this.options.taps);!(n=t()).done;)if(n.value.context)return!0;return!1},t.callTap=function(n,t){var r=t.onError,o=t.onResult,e=t.onDone,i=t.rethrowIfPossible,s="";if(!this.options)return s;s+="var _fn"+n+" = "+this.getTapFn(n)+";\n";var a=this.options.taps[n];switch(a.type){case"sync":i||(s+="var _hasError"+n+" = false;\n",s+="try {\n"),s+=o?"var _result"+n+" = _fn"+n+"("+this.args({before:a.context?"_context":void 0})+");\n":"_fn"+n+"("+this.args({before:a.context?"_context":void 0})+");\n",i||(s+="} catch(_err) {\n",s+="_hasError"+n+" = true;\n",s+=r("_err"),s+="}\n",s+="if(!_hasError"+n+") {\n"),o&&(s+=o("_result"+n)),e&&(s+=e()),i||(s+="}\n");break;case"async":var c="";c+=o?"(function(_err"+n+", _result"+n+") {\n":"(function(_err"+n+") {\n",c+="if(_err"+n+") {\n",c+=r("_err"+n),c+="} else {\n",o&&(c+=o("_result"+n)),e&&(c+=e()),c+="}\n",s+="_fn"+n+"("+this.args({before:a.context?"_context":void 0,after:c+="})"})+");\n";break;case"promise":s+="var _hasResult"+n+" = false;\n",s+="var _promise"+n+" = _fn"+n+"("+this.args({before:a.context?"_context":void 0})+");\n",s+="if (!_promise"+n+" || !_promise"+n+".then)\n",s+="  throw new Error('Tap function (tapPromise) did not return promise (returned ' + _promise"+n+" + ')');\n",s+="_promise"+n+".then((function(_result"+n+") {\n",s+="_hasResult"+n+" = true;\n",o&&(s+=o("_result"+n)),e&&(s+=e()),s+="}), function(_err"+n+") {\n",s+="if(_hasResult"+n+") throw _err"+n+";\n",s+=r("_err"+n),s+="});\n"}return s},t.callTapsSeries=function(n){var t=this,r=n.onError,o=n.onResult,e=n.resultReturns,i=n.onDone,s=n.doneReturns,a=n.rethrowIfPossible;if(!this.options||0===this.options.taps.length)return i();for(var c=this.options.taps.findIndex(function(n){return"sync"!==n.type}),u=e||s,l="",f=i,p=0,h=function(n){var e=n;f!==i&&("sync"!==t.options.taps[e].type||p++>20)&&(p=0,l+="function _next"+e+"() {\n",l+=f(),l+="}\n",f=function(){return(u?"return ":"")+"_next"+e+"();\n"});var s=f,h=function(n){return n?"":i()},y=t.callTap(e,{onError:function(n){return r(e,n,s,h)},onResult:o&&function(n){return o(e,n,s,h)},onDone:!o&&s,rethrowIfPossible:a&&(c<0||e<c)});f=function(){return y}},y=this.options.taps.length-1;y>=0;y--)h(y);return l+=f()},t.callTapsLooping=function(n){var t=n.onError,r=n.onDone,o=n.rethrowIfPossible;if(!this.options||0===this.options.taps.length)return r();var e=this.options.taps.every(function(n){return"sync"===n.type}),i="";return e||(i+="var _looper = (function() {\n",i+="var _loopAsync = false;\n"),i+="var _loop;\n",i+="do {\n",i+="_loop = false;\n",i+=this.callTapsSeries({onError:t,onResult:function(n,t,r,o){var i="";return i+="if("+t+" !== undefined) {\n",i+="_loop = true;\n",e||(i+="if(_loopAsync) _looper();\n"),i+=o(!0),i+="} else {\n",(i+=r())+"}\n"},onDone:r&&function(){var n="";return n+="if(!_loop) {\n",(n+=r())+"}\n"},rethrowIfPossible:o&&e}),i+="} while(_loop);\n",e||(i+="_loopAsync = true;\n",i+="});\n",i+="_looper();\n"),i},t.callTapsParallel=function(n){var t=this,r=n.onError,o=n.onResult,e=n.onDone,i=n.rethrowIfPossible,s=n.onTap,a=void 0===s?function(n,t){return t()}:s;if(!this.options)return"";if(this.options.taps.length<=1)return this.callTapsSeries({onError:r,onResult:o,onDone:e,rethrowIfPossible:i});var c="";c+="do {\n",c+="var _counter = "+this.options.taps.length+";\n",e&&(c+="var _done = (function() {\n",c+=e(),c+="});\n");for(var u=function(n){var s=function(){return e?"if(--_counter === 0) _done();\n":"--_counter;"},u=function(n){return n||!e?"_counter = 0;\n":"_counter = 0;\n_done();\n"};c+="if(_counter <= 0) break;\n",c+=a(n,function(){return t.callTap(n,{onError:function(t){var o="";return o+="if(_counter > 0) {\n",(o+=r(n,t,s,u))+"}\n"},onResult:o&&function(t){var r="";return r+="if(_counter > 0) {\n",(r+=o(n,t,s,u))+"}\n"},onDone:!o&&function(){return s()},rethrowIfPossible:i})},s,u)},l=0;l<this.options.taps.length;l++)u(l);return c+="} while(false);\n"},t.args=function(n){var t=n.before,r=n.after,o=this._args||[];return t&&(o=[t].concat(o)),r&&(o=o.concat(r)),0===o.length?"":o.join(", ")},t.getTapFn=function(n){return"fns["+n+"]"},t.getTap=function(n){return"_taps["+n+"]"},n}(),l=(s=function(){},a="Hook.context is deprecated and will be removed",c=!0,function(){return c&&(console.warn("DeprecationWarning: "+a),c=!1),s.apply(this,[].slice.call(arguments))}),f=function(){function n(n,t){this._args=n||[],this.name=t||"",this.taps=[],this.once=!1,this._call=function(){this.call=this._createCall("sync");var n=this.call.apply(this,[].slice.call(arguments));return this.afterInvoke(),n},this.call=this._call,this._callAsync=function(){this.callAsync=this._createCall("async");var n=this.callAsync.apply(this,[].slice.call(arguments));return this.afterInvoke(),n},this.callAsync=this._callAsync,this._promise=function(){this.promise=this._createCall("promise");var n=this.promise.apply(this,[].slice.call(arguments));return this.afterInvoke(),n},this.promise=this._promise}var t=n.prototype;return t.afterInvoke=function(){this.once&&(this.taps=this.taps.filter(function(n){return!n.once}),this._resetCompilation(),this.once=!1)},t.compile=function(n){throw new Error("Abstract: should be overridden")},t.isUsed=function(){return this.taps.length>0},t.withOptions=function(n){var t=this,r=function(t){return Object.assign({},n,"string"==typeof t?{name:t}:t)};return{name:this.name,tap:function(n,o){return t.tap(r(n),o)},tapAsync:function(n,o){return t.tapAsync(r(n),o)},tapPromise:function(n,o){return t.tapPromise(r(n),o)},isUsed:function(){return t.isUsed()},withOptions:function(n){return t.withOptions(r(n))}}},t._createCall=function(n){return this.compile({taps:this.taps,args:this._args,type:n})},t._resetCompilation=function(){this.call=this._call,this.callAsync=this._callAsync,this.promise=this._promise},t._insert=function(n){this._resetCompilation(),!this.once&&n.once&&(this.once=!0),this.taps.push(n)},t._tap=function(n,t,o){var e={name:"",context:!1,once:!1};if("string"==typeof t)e.name=t.trim();else{if("object"!=typeof t||null===t)throw new Error("Invalid tap options");if("string"!=typeof t.name||""===t.name)throw new Error("Missing name for tap");e.name=t.name,t.context&&(l(),e.context=t.context),e.once=Boolean(t.once)}this._insert(r({type:n,fn:o},e))},t.tap=function(n,t){this._tap("sync",n,t)},t.tapAsync=function(n,t){this._tap("async",n,t)},t.tapPromise=function(n,t){this._tap("promise",n,t)},t._isRegistered=function(n,t){return-1!==this._tapHookIndexOf(n,t)},t._deleteTapHook=function(n,t){this._resetCompilation(),this.taps=this.taps.filter(function(r){return!(r.type===n&&r.fn===t)})},t._replaceTapHook=function(n,t,r){this._resetCompilation();for(var o,e=!1,s=i(this.taps);!(o=s()).done;){var a=o.value;a.type===n&&a.fn===t&&(e=!0,a.fn=r)}return e},t._tapHookIndexOf=function(n,t){for(var r=-1,o=0;o<this.taps.length;o++)if(this.taps[o].fn===t&&this.taps[o].type===n){r=o;break}return r},n}(),p=new(function(n){function t(){return n.apply(this,arguments)||this}return o(t,n),t.prototype.content=function(n){var t=n.onError,r=n.onResult,o=n.onDone,e="";return this.options&&r?(e+="var _results = new Array("+this.options.taps.length+");\n",e+="var _checkDone = function() {\n",e+="for(var i = 0; i < _results.length; i++) {\n",e+="var item = _results[i];\n",e+="if(item === undefined) return false;\n",e+="if(item.result !== undefined) {\n",e+=r("item.result"),e+="return true;\n",e+="}\n",e+="if(item.error) {\n",e+=t("item.error"),e+="return true;\n",e+="}\n",e+="}\n",e+="return false;\n",e+="}\n",e+=this.callTapsParallel({onError:function(n,t,r,o){var e="";return e+="if("+n+" < _results.length && ((_results.length = "+(n+1)+"), (_results["+n+"] = { error: "+t+" }), _checkDone())) {\n",e+=o(!0),e+="} else {\n",(e+=r())+"}\n"},onResult:function(n,t,r,o){var e="";return e+="if("+n+" < _results.length && ("+t+" !== undefined && (_results.length = "+(n+1)+"), (_results["+n+"] = { result: "+t+" }), _checkDone())) {\n",e+=o(!0),e+="} else {\n",(e+=r())+"}\n"},onTap:function(n,t,r,o){var e="";return n>0&&(e+="if("+n+" >= _results.length) {\n",e+=r(),e+="} else {\n"),e+=t(),n>0&&(e+="}\n"),e},onDone:o})):e},t}(u)),h=function(n){function t(t,r){var o;return(o=n.call(this,t,r)||this).compile=function(n){return this.fns=[],p.setup(this.fns,n),p.create(n)},o.call=function(){throw new Error("call is not supported on a AsyncParallelBailHook")},o._call=function(){throw new Error("call is not supported on a AsyncParallelBailHook")},o}return o(t,n),t}(f),y=new(function(n){function t(){return n.apply(this,arguments)||this}return o(t,n),t.prototype.content=function(n){var t=n.onError;return this.callTapsParallel({onError:function(n,r,o,e){return t(r)+e(!0)},onDone:n.onDone})},t}(u)),_=function(n){function t(t,r){var o;return(o=n.call(this,t,r)||this).compile=function(n){return this.fns=[],y.setup(this.fns,n),y.create(n)},o.call=function(){throw new Error("call is not supported on a AsyncParallelHook")},o._call=function(){throw new Error("call is not supported on a AsyncParallelHook")},o}return o(t,n),t}(f),v=new(function(n){function t(){return n.apply(this,arguments)||this}return o(t,n),t.prototype.content=function(n){var t=n.onError,r=n.onResult;return this.callTapsSeries({onError:function(n,r,o,e){return t(r)+e(!0)},onResult:function(n,t,o){return"if("+t+" !== undefined) {\n"+r(t)+"\n} else {\n"+o()+"}\n"},resultReturns:n.resultReturns,onDone:n.onDone})},t}(u)),m=function(n){function t(t,r){var o;return(o=n.call(this,t,r)||this).compile=function(n){return this.fns=[],v.setup(this.fns,n),v.create(n)},o.call=function(){throw new Error("call is not supported on a AsyncSeriesBailHook")},o._call=function(){throw new Error("call is not supported on a AsyncSeriesBailHook")},o}return o(t,n),t}(f),d=new(function(n){function t(){return n.apply(this,arguments)||this}return o(t,n),t.prototype.content=function(n){var t=n.onError;return this.callTapsSeries({onError:function(n,r,o,e){return t(r)+e(!0)},onDone:n.onDone})},t}(u)),w=function(n){function t(t,r){var o;return(o=n.call(this,t,r)||this).compile=function(n){return this.fns=[],d.setup(this.fns,n),d.create(n)},o.call=function(){throw new Error("call is not supported on a AsyncSeriesHook")},o._call=function(){throw new Error("call is not supported on a AsyncSeriesHook")},o}return o(t,n),t}(f),k=new(function(n){function t(){return n.apply(this,arguments)||this}return o(t,n),t.prototype.content=function(n){var t=n.onError;return this.callTapsLooping({onError:function(n,r,o,e){return t(r)+e(!0)},onDone:n.onDone})},t}(u)),g=function(n){function t(t,r){var o;return(o=n.call(this,t,r)||this).compile=function(n){return this.fns=[],k.setup(this.fns,n),k.create(n)},o.call=function(){throw new Error("call is not supported on a AsyncSeriesLoopHook")},o._call=function(){throw new Error("call is not supported on a AsyncSeriesLoopHook")},o}return o(t,n),t}(f),b=new(function(n){function t(){return n.apply(this,arguments)||this}return o(t,n),t.prototype.content=function(n){var t=this,r=n.onError,o=n.onResult;return this.callTapsSeries({onError:function(n,t,o,e){return r(t)+e(!0)},onResult:function(n,r,o){var e="";if(e+="if("+r+" !== undefined) {\n",e+="if (!("+r+" instanceof Array)){ \n",e+=r+" = ["+r+"]\n",e+="}\n",t._args)for(var i=0;i<t._args.length;i++)e+=["if ("+r+"["+i+"]) {",t._args[i]+" = "+r+"["+i+"];","}\n"].join("\n");return(e+="}\n")+o()},onDone:function(){return o("["+t._args.toString()+"]")}})},t}(u)),E=function(n){function t(t,r){var o;return(o=n.call(this,t,r)||this).compile=function(n){return this.fns=[],b.setup(this.fns,n),b.create(n)},o.call=function(){throw new Error("call is not supported on a AsyncSeriesWaterfallAllHook")},o._call=function(){throw new Error("call is not supported on a AsyncSeriesWaterfallAllHook")},o}return o(t,n),t}(f),A=new(function(n){function t(){return n.apply(this,arguments)||this}return o(t,n),t.prototype.content=function(n){var t=this,r=n.onError,o=n.onResult;return this.callTapsSeries({onError:function(n,t,o,e){return r(t)+e(!0)},onResult:function(n,r,o){var e="";return e+="if("+r+" !== undefined) {\n",e+=t._args[0]+" = "+r+";\n",(e+="}\n")+o()},onDone:function(){return o(t._args[0])}})},t}(u)),H=function(n){function t(t,r){var o;return(o=n.call(this,t,r)||this).compile=function(n){return this.fns=[],A.setup(this.fns,n),A.create(n)},o.call=function(){throw new Error("call is not supported on a AsyncSeriesWaterfallHook")},o._call=function(){throw new Error("call is not supported on a AsyncSeriesWaterfallHook")},o}return o(t,n),t}(f),P=new Map,S=0;function T(){return++S}var R={tap:"sync",tapAsync:"async",tapPromise:"promise"};function x(n){throw new Error("react-tapable: "+n)}var D=function(){function n(n,t){this.name=n,this.hooks=t,this.count=Object.keys(t).reduce(function(n,t){return n[t]=0,n},{})}var t=n.prototype;return t.call=function(n){var t=this.getHook(n);if(!t)throw new Error("hook doesn't exist in controller,it' s name : "+n+" ");return t.call.apply(t,[].slice.call(arguments,1))},t.callAsync=function(n){var t=this.getHook(n);if(!t)throw new Error("hook doesn't exist in controller,it' s name : "+n+" ");return t.callAsync.apply(t,[].slice.call(arguments,1))},t.promise=function(n){var t=this.getHook(n);if(!t)throw new Error("hook doesn't exist in controller,it' s name : "+n+" ");return t.promise.apply(t,[].slice.call(arguments,1))},t.getHook=function(n){if(this.hooks.hasOwnProperty(n))return this.hooks[n]},t.getHooksNameMap=function(){if(!this.hooks)return{};var n={};return Object.keys(this.hooks).reduce(function(n,t){return n[t]=t,n},n),n},t.getHookTapName=function(n){return this.name+":"+n},t.tapHook=function(n,t){var r=this.getHook(n.hook);r||x("tapHook Cannot find hook by key "+n.hook),"tap"!==n.mode&&"tapAsync"!==n.mode&&"tapPromise"!==n.mode&&x("tapHook rawOptions' mode must be tap/tapAsync/tapPromise, but get "+n.mode),r[n.mode]({context:Boolean(n.context),name:this.getHookTapName(n.hook),once:Boolean(n.once)},t)},t.removeTapHook=function(n,t,r){var o=this.getHook(n);o||x("removeTapHook Cannot find hook by key "+n),"tap"!==t&&"tapAsync"!==t&&"tapPromise"!==t&&x("removeTapHook mode must be tap/tapAsync/tapPromise, but get "+t),o._deleteTapHook(R[t],r)},n}();function I(n,r){var o=T();P.has(n+o+"")&&console.warn("react-tapable: controller: "+n+" has been registed, and it will be covered");var e=new D(n,r);return P.set(n+o,e),{HooksNameMap:e.getHooksNameMap(),call:function(n){return e.call.apply(e,[n].concat([].slice.call(arguments,1)))},callAsync:function(n){return e.callAsync.apply(e,[n].concat([].slice.call(arguments,1)))},promise:function(n){return e.promise.apply(e,[n].concat([].slice.call(arguments,1)))},tapHook:function(n,t){return e.tapHook(n,t)},removeTapHook:function(n,t,r){return e.removeTapHook(n,t,r)},useTapable:function(r,e,i){return function(n,r,o,e){var i=function(n,t,r,o){var e={},i=P.get(n);if("string"!=typeof t.mode?x("useTapable rawOptions' mode must be string"):"tap"!==t.mode&&"tapAsync"!==t.mode&&"tapPromise"!==t.mode?x("useTapable rawOptions' mode must be tap/tapAsync/tapPromise, but get "+t.mode):e.mode=t.mode,"string"!=typeof t.hook)x("useTapable rawOptions' hook must be string, but get "+typeof t.hook);else{var s=i.getHook(t.hook);s||x("useTapable please check to see if the controller has this hook "+t.hook),e.hook=s}return e.type=R[e.mode],r instanceof Function?(e.hook._isRegistered(e.type,r)&&x("useTapable rawOptions' fn has been registered"),e.fn=r):x("useTapable rawOptions' fn must be function"),e.useAliasArr=o||[],e.context=Boolean(t.context),e.name=i.getHookTapName(t.hook),e.once=Boolean(t.once),e}(n,r,o,e),s=i.hook,a=i.context,c=i.fn,u=i.name,l=i.type,f=i.mode,p=i.once;t.useEffect(function(){return s[f]({context:a,name:u,once:p},c),function(){s._deleteTapHook(l,c)}},[].concat(i.useAliasArr))}(n+o,r,e,i)}}}var O=new(function(n){function t(){return n.apply(this,arguments)||this}return o(t,n),t.prototype.content=function(n){var t=n.onError,r=n.onResult;return this.callTapsSeries({onError:function(n,r){return t(r)},onResult:function(n,t,o){return"if("+t+" !== undefined) {\n"+r(t)+";\n} else {\n"+o()+"}\n"},resultReturns:n.resultReturns,onDone:n.onDone,rethrowIfPossible:n.rethrowIfPossible})},t}(u)),j=function(n){function t(t,r){var o;return(o=n.call(this,t,r)||this).compile=function(n){return this.fns=[],O.setup(this.fns,n),O.create(n)},o}o(t,n);var r=t.prototype;return r.tapAsync=function(){throw new Error("tapAsync is not supported on a SyncHook")},r.tapPromise=function(){throw new Error("tapPromise is not supported on a SyncHook")},t}(f),C=new(function(n){function t(){return n.apply(this,arguments)||this}return o(t,n),t.prototype.content=function(n){var t=n.onError;return this.callTapsSeries({onError:function(n,r){return t(r)},onDone:n.onDone,rethrowIfPossible:n.rethrowIfPossible})},t}(u)),B=function(n){function t(t,r){var o;return(o=n.call(this,t,r)||this).compile=function(n){return this.fns=[],C.setup(this.fns,n),C.create(n)},o}o(t,n);var r=t.prototype;return r.tapAsync=function(){throw new Error("tapAsync is not supported on a SyncHook")},r.tapPromise=function(){throw new Error("tapPromise is not supported on a SyncHook")},t}(f),W=new(function(n){function t(){return n.apply(this,arguments)||this}return o(t,n),t.prototype.content=function(n){var t=n.onError;return this.callTapsLooping({onError:function(n,r){return t(r)},onDone:n.onDone,rethrowIfPossible:n.rethrowIfPossible})},t}(u)),L=function(n){function t(t,r){var o;return(o=n.call(this,t,r)||this).compile=function(n){return this.fns=[],W.setup(this.fns,n),W.create(n)},o}o(t,n);var r=t.prototype;return r.tapAsync=function(){throw new Error("tapAsync is not supported on a SyncLoopHook")},r.tapPromise=function(){throw new Error("tapPromise is not supported on a SyncLoopHook")},t}(f),F=new(function(n){function t(){return n.apply(this,arguments)||this}return o(t,n),t.prototype.content=function(n){var t=this,r=n.onError,o=n.onResult;return this.callTapsSeries({onError:function(n,t){return r(t)},onResult:function(n,r,o){var e="";if(e+="if("+r+" !== undefined) {\n",e+="if (!("+r+" instanceof Array)){ \n",e+=r+" = ["+r+"]\n",e+="}\n",t._args)for(var i=0;i<t._args.length;i++)e+=["if ("+r+"["+i+"]) {",t._args[i]+" = "+r+"["+i+"];","}\n"].join("\n");return(e+="}\n")+o()},onDone:function(){return o("["+t._args.toString()+"]")},doneReturns:n.resultReturns,rethrowIfPossible:n.rethrowIfPossible})},t}(u)),M=function(n){function t(t,r){var o;if(t.length<1)throw new Error("WaterfallAll hooks must have at least one argument");return(o=n.call(this,t,r)||this).compile=function(n){return this.fns=[],F.setup(this.fns,n),F.create(n)},o}o(t,n);var r=t.prototype;return r.tapAsync=function(){throw new Error("tapAsync is not supported on a SyncHook")},r.tapPromise=function(){throw new Error("tapPromise is not supported on a SyncHook")},t}(f),N=new(function(n){function t(){return n.apply(this,arguments)||this}return o(t,n),t.prototype.content=function(n){var t=this,r=n.onError,o=n.onResult;return this.callTapsSeries({onError:function(n,t){return r(t)},onResult:function(n,r,o){var e="";return e+="if("+r+" !== undefined) {\n",e+=t._args[0]+" = "+r+";\n",(e+="}\n")+o()},onDone:function(){return o(t._args[0])},doneReturns:n.resultReturns,rethrowIfPossible:n.rethrowIfPossible})},t}(u)),U=function(n){function t(t,r){var o;if(t.length<1)throw new Error("Waterfall hooks must have at least one argument");return(o=n.call(this,t,r)||this).compile=function(n){return this.fns=[],N.setup(this.fns,n),N.create(n)},o}o(t,n);var r=t.prototype;return r.tapAsync=function(){throw new Error("tapAsync is not supported on a SyncHook")},r.tapPromise=function(){throw new Error("tapPromise is not supported on a SyncHook")},t}(f);n.AsyncParallelBailHook=h,n.AsyncParallelHook=_,n.AsyncSeriesBailHook=m,n.AsyncSeriesHook=w,n.AsyncSeriesLoopHook=g,n.AsyncSeriesWaterfallAllHook=E,n.AsyncSeriesWaterfallHook=H,n.Controller=D,n.SyncBailHook=j,n.SyncHook=B,n.SyncLoopHook=L,n.SyncWaterfallAllHook=M,n.SyncWaterfallHook=U,n.createTapableController=I,n.default=I});
